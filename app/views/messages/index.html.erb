<div class="container">
  <div class="chat-box row" id="chat-box">
    <%# if @over_ten %>
      <%#= link_to 'Show Previous', '?m=all' %>
    <%# end %>
    <% @messages.each do |message| %>
      <div class="col-md-12 chat-item">
        <% if message.body %>
          <% user = User.find(message.user_id) %>
          <%= message.message_time %> <%= user.firstname %> <%= message.body %>
        <% end %>
      </div>
    <% end %>
    <div class="col-md-12">
    </div>
  </div>
</div>

<div class="chat-footer">
  <div class="container">
    <%= form_for [@conversation, @message], html: {class: "ui reply form"} do |f| %>
      <%= f.text_area :body, class: "form-control", autofocus: true %>
      <%= f.text_field :user_id, value: current_user.id, type: "hidden" %>
      <%= f.submit "Add Reply", id: "hide-send" %>
    <% end %>
  </div>
</div>


<%= render 'shared/navigation' %>

<style>
#hide-send {
  display:  none;
}
body *, * {
  box-sizing: border-box !important;
}
.chat-item {
  background-color: #ffe1e1;
  margin-top: 10px;
  margin-bottom: 10px;
  border-radius: 30px;
  padding: 50px;
  width: 100%;
  overflow: hidden
}

.chat-footer{
  padding: 10px;
  position: fixed;
  bottom: 105px;
  width: 100%;
}

.chat-box {
  height: 100%;
  overflow: auto;
  overflow-x: hidden;
  padding-bottom: 210px;
}    
</style>
<script type="text/javascript">
// Get the input field
let input = document.getElementById("new_message");

// Execute a function when the user releases a key on the keyboard
input.addEventListener("keyup", function(event) {
  // Number 13 is the "Enter" key on the keyboard
  if (event.keyCode === 13) {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("hide-send").click();
  }
});
// Scroll to bottom

updateScroll();

function updateScroll(){
var objDiv = document.getElementById("chat-box");
objDiv.scrollTop = objDiv.scrollHeight;
}
</script>